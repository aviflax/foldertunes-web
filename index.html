<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>FolderTunes</title>
    <link rel="stylesheet" href="presentation.css">
    <script src="https://cdn.jsdelivr.net/npm/htmx.org@2.0.8/dist/htmx.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/htmx-ext-json-enc@2.0.3/json-enc.js"></script>
    <meta name="htmx-config" content='{"selfRequestsOnly": false}' />
    <script>
      document.addEventListener('htmx:configRequest', (event) => {
        const form = event.detail.elt;
        form.querySelectorAll('input[type="number"]').forEach((input) => {
          if (input.name in event.detail.parameters) {
            event.detail.parameters[input.name] = Number(event.detail.parameters[input.name]);
          }
        });
      });

      function onSubmitted(event) {
        event.target.innerHTML = event.detail.successful
          ? `<p class="success">✅ Request submitted and pending.</p>
             <p>Look for an email from TestFlight soon!</p>
             <p>(If it doesn’t show up, please <a href="mailto:beta@foldertunes.app">email me</a>.)</p>`
          : `<p class="error">❌ Sorry, an error occurred.</p>
             <p>Please try again later or <a href="mailto:beta@foldertunes.app">email me</a>.</p>`;
      }
    </script>
</head>
<body id="home">
    <main>
        <img src="images/FolderTunes Icon 360x360.png" width="360" height="360" alt="FolderTunes Icon">
        
        <h1>FolderTunes</h1>
        <h2>An iPhone app for playing music files from a folder.</h2>
        <h3>Coming soon.</h3>
        
        <section id="join-form">
            <h1>Like half-baked apps?</h1>
            <h1>Undaunted by bugs?</h1>
            <h1>Join the beta test!</h1>
            
            <p>If you’ll agree to send me feedback, I’d love for you to try out the
               app right now, before it's fully baked, gratis.</p>
            
            <!-- hx-post rather than hx-boost so htmx doesn't scroll to the top after submission -->
            <form method="POST"
                  action="https://foldertunes-beta-join-requests.val.run/"
                  hx-post="https://foldertunes-beta-join-requests.val.run/"
                  hx-ext="json-enc"
                  hx-swap="none"
                  hx-on::after-request="onSubmitted(event)">
                <label class="field">
                    <span>Your email address</span>
                    <input name="emailAddress" type="email" required placeholder="you@email.com"/>
                </label>
                <div class="field">
                    <span>May I send you a few updates per year by email?</span>
                    <div class="radio-group">
                        <label><input name="emailUpdatesOK" type="radio" required value="yes"/> Yes</label>
                        <label><input name="emailUpdatesOK" type="radio" required value="no"/> No</label>
                    </div>
                </div>
                
                <div class="field">
                    <span>Do you agree to send feedback?</span>
                    <label class="checkbox"><input type="checkbox" required/> Yes</label>
                </div>
                
                <button type="submit">Send Request</button>
                <span class="spinner" aria-label="Submitting…"></span>
            </form>
        </section>
    </main>
    
    <footer>
        &copy; 2026 Tolerable Software &amp; Avi Flax
    </footer>
</body>
</html>
